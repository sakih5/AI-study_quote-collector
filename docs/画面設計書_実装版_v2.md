# 画面設計書（実装版）

## デザインコンセプト

### ビジュアルスタイル

- **ダークテーマ**: 背景 #1a1a1a、カード #2a2a2a
- **シンプル・ミニマル**: 余計な装飾を排除
- **書籍カバー表示**: 各書籍に画像サムネイル
- **活動領域・タグフィルター**: 上部に横スクロールの活動領域・タグボタン
- **カード型レイアウト**: フレーズを書籍ごとにグループ化

---

## 画面一覧

### 1. ホーム画面（メイン）

- ヘッダーの「キーワードで絞り込み…」に何かを入力すると、**その言葉を含む**書籍・フレーズが全て表示される
- 書籍単位・SNSのユーザ単位でグループ化表示
- 書籍の場合:
  - 書籍カバー画像（左側）
  - タイトル・著者名
  - その書籍からのフレーズ一覧
  - ページ番号（p.27）表示
  - 投稿日時
- SNSの場合:
  - SNSのアイコン（XならXマーク、Threadsなら＠マーク）
  - ユーザ名・ユーザID
  - そのユーザの投稿からのフレーズ一覧
  - 投稿日時
- 活動領域・タグによるフィルタリング（上部）
  - 該当件数が表示されて、CSVでデータをエクスポートするボタンがある

```
┌────────────────────────────────────────────────────────────┐
│ 抜き書きアプリ    [キーワードによる絞り込み...] [検索] ○○でログイン中 [ログアウト] [設定] │
├────────────────────────────────────────────────────────────┤
│ 活動領域                                                    │
│ [📚読書・情報収集] [🧠学習/勉強] [🏢仕事/マネジメント] [💭コミュニケーション] [💻開発/設計]... │
│                                                            │
│ タグ                                                        │
│ [#意思決定] [#習慣] [#抽象化] [#集中] [#キャリア] [#学習] [#人間関係]... │
│                                                            │
│ 全400件中該当件数 25件　　　　　 [該当データをCSVでエクスポート]    │
│                                                            │
│ ┌──────────────────────────────────────────────────────┐   │
│ │ ┌─────┐  「深い仕事」                                    │   │
│ │ │     │  著者: カル・ニューポート                         │   │
│ │ │書籍 │                                                 │   │
│ │ │画像 │  集中は筋肉内のように鍛えられる。        (p.27)   │   │
│ │ │     │   🧠学習/勉強  #集中                          │   │
│ │ │     │                                               │   │
│ │ │     │  重要な少数へ資源を配分せよ。            (p.88) │   │
│ │ └─────┘   🏢仕事/マネジメント  #キャリア               │   │
│ └──────────────────────────────────────────────────────┘   │
│                                                            │
│ ┌──────────────────────────────────────────────────────┐   │
│ │ ┌─────┐  「エッセンシャル思考」                        │   │
│ │ │     │  著者: グレッグ・マキューン                    │   │
│ │ │書籍 │                                               │   │
│ │ │画像 │  やらないことリストは、やることリスト以上に強力だ。│   │
│ │ │     │                                         (p.41)│   │
│ │ │     │   🏢仕事/マネジメント  #キャリア               │   │
│ │ │     │  トレードオフを直視する勇気。          (p.52)   │   │
│ │ └─────┘   🏢仕事/マネジメント  #キャリア               │   │
│ └──────────────────────────────────────────────────────┘   │
│                                                            │
│ ┌──────────────────────────────────────────────────────┐   │
│ │ ┌─────┐  「アルゴリズム思考術」                        │   │
│ │ │     │  著者: ブライアン・クリスチャン                │   │
│ │ │書籍 │                                                │   │
│ │ │画像 │  停止問題は日常の締切にも該当する。      (p.123)│   │
│ │ │     │   🏢仕事/マネジメント  #キャリア               │   │
│ │ │     │  探索と活用のバランスを取れ。          (p.161)│   │
│ │ └─────┘   🏢仕事/マネジメント  #キャリア               │   │
│ └──────────────────────────────────────────────────────┘   │
│                                                            │
│                       [もっと見る]                         │
└────────────────────────────────────────────────────────────┘

                                            [+ 新規登録] ← 右下固定
```

---

### 2. フレーズ登録画面（モーダル）

- アコーディオンで1画面表示

```
┌───────────────────────────────────────────────────────┐
│ フレーズを登録                                 [×]      │
├───────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐   │
│ │ 1. フレーズ & 分類分け                        v   │   │
│ └─────────────────────────────────────────────────┘   │
│ ┌─────────────────────────────────────────────────┐   │
│ │ 2. 出典（本 / SNS / その他）                  v   │   │
│ └─────────────────────────────────────────────────┘   │
│                                          [登録する]    │
└───────────────────────────────────────────────────────┘
```

#### 2-1. フレーズ & 分類分け

- 「テキスト入力」ボタンを選択した場合
  - フレーズを直接テキストボックスに入力する
  - フレーズに分類付けたい活動領域、タグを選択する
  - `[+]`ボタンを押すと、テキストボックスと活動領域、タグのセットが新たに1セット追加される

```
┌───────────────────────────────────────────────────────┐
│ フレーズを登録                                 [×]      │
├───────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐   │
│ │ 1. フレーズ & 分類分け                        ^   │   │
│ └─────────────────────────────────────────────────┘   │
│ フレーズの入力方法                                      │
│ ○ テキスト入力  ● 画像から抽出（OCR）                    │
│                                                        │
│ ┌───────────────────────┐  ┌───────────────────────┐   │
│ │ テキスト入力           │  │ 画像から抽出（OCR）    │   │
│ │ 直接フレーズを入力します。│  │ 画像をアップロードして文字をなぞって抽出。│   │
│ └───────────────────────┘  └───────────────────────┘  │
│  フレーズ                                              │
│ ┌─────────────────────────────────────────────────┐   │
| | 例）集中は筋肉のように鍛えられる。                 |   |
| |                                                 |   |
│ └─────────────────────────────────────────────────┘  |
│ 活動領域（複数選択可）*                                      │
│ ☑ 📚 読書・情報収集 ☐ 💼 仕事・キャリア                 │
│                                                         │
│ タグ                                                    │
│ [#集中 ×] [#習慣 ×]                                     │
| 新しいタグを作成                                         |
│ [ 例: 生産性　　                   ] [+ 追加]            │
|                                                         |
│                          [+]                          │
│                                                       │
│ ┌─────────────────────────────────────────────────┐   │
│ │ 2. 出典（本 / SNS / その他）                  v   │   │
│ └─────────────────────────────────────────────────┘   │
│                                          [登録する]    │
└───────────────────────────────────────────────────────┘
```

- 「画像から抽出（OCR）」ボタンを選択した場合
  1. 画像上で文字をドラッグ（なぞる）
  2. なぞった部分がハイライトされる
  3. OCRで認識されたテキストがプレビュー表示
  4. `[+]`ボタンを押すことで複数箇所を選択可能（選択されたテキストボックスがハイライトされて、そこにOCRで文字起こししたテキストが入る）

```
┌───────────────────────────────────────────────────────┐
│ フレーズを登録                                 [×]      │
├───────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐   │
│ │ 1. フレーズ & 分類分け                        ^   │   │
│ └─────────────────────────────────────────────────┘   │
│ フレーズの入力方法                                      │
│ ○ テキスト入力  ● 画像から抽出（OCR）                    │
│                                                      │
│ ┌───────────────────────┐  ┌───────────────────────┐   │
│ │ テキスト入力           │  │ 画像から抽出（OCR）    │   │
│ │ 直接フレーズを入力します。│  │ 画像をアップロードして文字をなぞって抽出。│   │
│ └───────────────────────┘  └───────────────────────┘  │
│ 📷 画像をアップロード                                 │
│ 💡 画像をなぞって文字を選択してください                 │
│ ┌─────────────────────────────────────────────────┐   │
│ │ [アップロードされた画像]                          │   │
│ │                                                   │   │
│ │  第1章 深い仕事とは                              │   │
│ │                                                   │   │
│ │  集中は筋肉内のように鍛えられる。← なぞる           │   │
│ │  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~                    │   │
│ │                                                   │   │
│ │  重要な少数へ資源を配分せよ。                    │   │
│ │                                                   │   │
│ │  ディープワークは現代において                    │   │
│ │  ますます価値あるスキルになっている。            │   │
│ │                                                   │   │
│ └─────────────────────────────────────────────────┘     │
│                                                         │
│ 選択されたテキスト(直接修正できます):                      │
│ ┌─────────────────────────────────────────────────┐     │
│ │ 集中は筋肉内のように鍛えられる。                   │     │
│ └─────────────────────────────────────────────────┘     │
│ 活動（複数選択可）*                                      │
│ ☑ 📚 読書・情報収集 ☐ 💼 仕事・キャリア                 │
│                                                         │
│ タグ                                                    │
│ [#集中 ×] [#習慣 ×]                                     │
| 新しいタグを作成                                         |
│ [ 例: 生産性　　                   ] [+ 追加]            │
|                                                         |
│ ┌─────────────────────────────────────────────────┐     │
│ │ 重要な少数へ資源を配分せよ。                       │     │
│ └─────────────────────────────────────────────────┘     │
│ 活動（複数選択可）                                       │
│ ☑ 📚 読書・情報収集 ☐ 💼 仕事・キャリア                 │
│                                                         │
│ タグ                                                    │
│ [#集中 ×] [#習慣 ×]                                     │
| 新しいタグを作成                                         |
│ [ 例: 生産性　　                   ] [+ 追加]            │
|                                                         |
│                          [+]                            │
│                                                         │
│ ┌─────────────────────────────────────────────────┐   │
│ │ 2. 出典（本 / SNS / その他）                  v   │   │
│ └─────────────────────────────────────────────────┘   │
│                                          [登録する]    │
└───────────────────────────────────────────────────────┘
```

#### 2-2. 出典（本 / SNS / その他）

```
┌───────────────────────────────────────────────────────┐
│ フレーズを登録                                 [×]      │
├───────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐   │
│ │ 1. フレーズ & 分類分け                        v   │   │
│ └─────────────────────────────────────────────────┘   │
│ ┌─────────────────────────────────────────────────┐   │
│ │ 2. 出典（本 / SNS / その他）                  ^   │   │
│ └─────────────────────────────────────────────────┘   │
|  ○ 本  ○ SNS  ○ その他                                 │
│                                          [登録する]    │
└───────────────────────────────────────────────────────┘
```

- 本を選択した場合
  - AmazonのURLを貼ることで、タイトル、本表紙画像、著者が自動で抽出される
  - 抽出に失敗した場合は、手動でタイトル、本表示画像、著者を入力できる

```
┌───────────────────────────────────────────────────────┐
│ フレーズを登録                                 [×]      │
├───────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐   │
│ │ 1. フレーズ & 分類分け                        v   │   │
│ └─────────────────────────────────────────────────┘   │
│ ┌─────────────────────────────────────────────────┐   │
│ │ 2. 出典（本 / SNS / その他）                  ^   │   │
│ └─────────────────────────────────────────────────┘   │
|  ● 本  ○ SNS  ○ その他                                 │
│ ───────────────────────────────────────────────       │
│                                                       │
│ 書籍を選択                                             │
│ [既存の書籍から選択 ▼]  または  [新しい書籍を登録 +]      │
│                                                       │
│ ─ 新規書籍の場合 ─                                     │
│ Amazon URL                                            │
│ ┌─────────────────────────────────────────────────┐   │
│ │ https://www.amazon.co.jp/dp/                    │   │
│ │ B07PZKQFQL                                      │   │
│ └─────────────────────────────────────────────────┘   │
│                   [書籍情報を取得]                     │
│                                                       │
│  ─ リンクから取得された書籍情報 ─                        │
│ ┌─────┐                                               │
│ │書籍 │  タイトル: [深い仕事]                           │
│ │カバー│  著者: [カル・ニューポート]                     │
│ │画像 │  出版社: [ダイヤモンド社]                        │
│ └─────┘                                               │
│                                  　　　　　　          │
│                                          [登録する]    │
└───────────────────────────────────────────────────────┘
```

- SNSを選択した場合

  - ポストのURLを貼ることで、そこからユーザIDを取得
  - 「X ユーザID」でGoogle検索して、検索上位の中から「ユーザ名 (@ユーザID)」となっているものを選択してユーザ名を自動抽出（GoogleのHTMLを直接スクレイピングするのは規約的にグレー。商用用途は SerpAPI / Google Custom Search API（公式）を利用推奨）

```
┌───────────────────────────────────────────────────────┐
│ フレーズを登録                                 [×]      │
├───────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐   │
│ │ 1. フレーズ & 分類分け                        v   │   │
│ └─────────────────────────────────────────────────┘   │
│ ┌─────────────────────────────────────────────────┐   │
│ │ 2. 出典（本 / SNS / その他）                  ^   │   │
│ └─────────────────────────────────────────────────┘   │
|  ○ 本  ● SNS  ○ その他                                 │
│                                                       │
│  ● X (旧Twitter)  ○ Threads                            │
│                                                       │
│ [既存のユーザから選択 ▼]  または  [新しいユーザを登録 +]  │
│                                                       │
│ ─ 新規ユーザの場合 ─                                     │
│ ポストのURL                                            │
│ ┌─────────────────────────────────────────────────┐   │
│ │ https://x.com/kentaro_dev/status/12345678?=53   │   │
│ └─────────────────────────────────────────────────┘   │
│                [投稿主の情報を取得]                     │
│                                                       │
│  ─ リンクから取得された投稿主情報 ─                        │
│ ユーザーID *                                           │
│ [kentaro_dev                      ]                 │
│                                                      │
│ 表示名                                               │
│ [Kentaro | エンジニア            ]                   │
│                                                      │
│                                          [登録する]    │
└───────────────────────────────────────────────────────┘
```

#### 2-4. その他を選択した場合（通常入力）

```
┌───────────────────────────────────────────────────────┐
│ フレーズを登録                                 [×]      │
├───────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────┐   │
│ │ 1. フレーズ & 分類分け                        v   │   │
│ └─────────────────────────────────────────────────┘   │
│ ┌─────────────────────────────────────────────────┐   │
│ │ 2. 出典（本 / SNS / その他）                  ^   │   │
│ └─────────────────────────────────────────────────┘   │
|  ○ 本  ○ SNS  ● その他                                 │
│                                                       │
│ 出典（任意）                                           │
│ ┌─────────────────────────────────────┐              │
│ │ 社内研修                             │              │
│ └─────────────────────────────────────┘              │
│                                                       │
│ メモ（任意）                                           │
│ ┌─────────────────────────────────────┐               │
│ │ 10月の全社研修での気づき              │               │
│ └─────────────────────────────────────┘               │
│                                                      │
│                                          [登録する]    │
└───────────────────────────────────────────────────────┘
```

---

### 3. 設定画面

```
┌────────────────────────────────────────────────────────────┐
│ ← 抜き書きアプリ                                           │
├────────────────────────────────────────────────────────────┤
│                                                            │
│ ⚙️ 設定                                                    │
│                                                            │
│ ─────────────────────────────────────────                 │
│ 🏷️ タグ管理                                                │
│ ─────────────────────────────────────────                 │
│                                                            │
│ [タグ管理画面を開く →]                                    │
│                                                            │
│ ─────────────────────────────────────────                 │
│ 🚪 アカウント                                              │
│ ─────────────────────────────────────────                 │
│                                                            │
│ [⚠️ アカウントを削除]                                      │
│                                                            │
└────────────────────────────────────────────────────────────┘
```

---

### 4. タグ管理画面

```
┌────────────────────────────────────────────────────────────┐
│ ← 設定                                                     │
├────────────────────────────────────────────────────────────┤
│                                                            │
│ 🏷️ タグ管理                                                │
│                                                            │
│ [検索.......................] [新規作成]                  │
│ ソート: [使用数順 ▼]                                       │
│                                                            │
│ ┌──────────────────────────────────────────────────────┐   │
│ │ #習慣                                        [23件]   │   │
│ │                                                        │   │
│ │ 📊 活動: 📚読書(10) 💼仕事(8) 🎨創作(3) 🌱生活(2)    │   │
│ │                                                        │   │
│ │                    [名前変更] [統合] [削除]           │   │
│ └──────────────────────────────────────────────────────┘   │
│                                                            │
│ ┌──────────────────────────────────────────────────────┐   │
│ │ #意思決定                                    [15件]   │   │
│ │                                                        │   │
│ │ 📊 活動: 💼仕事(9) 📖学習(4) 📚読書(2)                │   │
│ │                                                        │   │
│ │                    [名前変更] [統合] [削除]           │   │
│ └──────────────────────────────────────────────────────┘   │
│                                                            │
│ ┌──────────────────────────────────────────────────────┐   │
│ │ #集中                                        [12件]   │   │
│ │                                                        │   │
│ │ 📊 活動: 🎨創作(7) 💼仕事(3) 📖学習(2)                │   │
│ │                                                        │   │
│ │                    [名前変更] [統合] [削除]           │   │
│ └──────────────────────────────────────────────────────┘   │
│                                                            │
└────────────────────────────────────────────────────────────┘
```
